{"version":3,"sources":["manager.js"],"names":[],"mappings":"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","file":"manager-compiled.js","sourcesContent":["/**\n * Created by wermington on 6/5/16.\n */\n\nvar fs = require('fs');\nvar util = require('util');\n\nvar Loader = {\n\n    resourcesPath : \"resources/\",\n    listsPath: \"lists/\",\n    cssPath: \"styles/\",\n\n    saveCss: function (name, text) {\n        var path = Loader.resourcesPath + Loader.cssPath + name + \".css\";\n        console.log(\"Saving css file: [%s] to [%s]\", name, path);\n        fs.writeFile(path, text);\n    },\n\n    deleteCss: function (name) {\n        var path = Loader.resourcesPath + Loader.cssPath + name + \".css\";\n        fs.unlink(path);\n    },\n    \n    loadJson: function (path) {\n      fs.readFile(path, function (err, data) {\n          if(err) {\n              console.error(err);\n              return null\n          }\n          try {\n              return JSON.parse(data);\n          }catch (e)\n          {\n              console.error(e);\n              return {};\n          }\n      });\n    },\n\n    saveJson: function (path, json) {\n        console.log(\"Saving json [\" + path + \"]: \", json);\n        var string  = JSON.stringify(json);\n        fs.writeFile(path, string);\n    },\n\n    loadList : function (name) {\n        var basePath = Loader.resourcesPath + Loader.listsPath;\n        var path = basePath + name + \".json\";\n\n        console.info(\"Loading lists file: \\\"%s\\\"\", path);\n        return Loader.loadJson(path);\n    },\n\n    saveList : function (name, object) {\n        var basePath = Loader.resourcesPath + Loader.listsPath;\n        var path = basePath + name + \".json\";\n        console.info(\"Saving lists file: \\\"%s\\\"\", path);\n        Loader.saveJson(path, object)\n    }\n};\n\n\nvar manager = function () {\n\n    this.stylesCollection = Loader.loadList(\"styles\");\n    this.commandsCollection = Loader.loadList(\"commands\");\n    this.buttonsCollection = Loader.loadList(\"buttons\"); // TODO\n    this.layoutsCollection = Loader.loadList(\"layouts\"); // TODO\n\n\n    this.createStyle = function (req) {\n        var obj = req.body.data;\n\n\n        console.log(\"Style name: %s\", obj.styleName);\n        console.log(\"Class name: %s\", obj.className);\n        console.log(\"Style text: %s\", obj.styleCss);\n\n        if(this.stylesCollection == null)\n        {\n            console.log(\"Style was null\");\n            this.stylesCollection = {};\n        }\n\n\n        if(this.stylesCollection.hasOwnProperty(obj.className))\n        {\n            var err = util.format(\"Style class with name: \\\"%s\\\" already exists.\", obj.className);\n            console.warn(err);\n            return err;\n        }\n\n\n        this.stylesCollection[obj.className] = obj;\n        Loader.saveList(\"styles\", this.stylesCollection);\n        return \"Style saved successfully\";\n    };\n    \n    this.createCommand = function (req) {\n        const obj = req.data;\n\n        if(this.commandsCollection.hasOwnProperty(obj.name))\n        {\n            var err = util.format(\"Action with name: \\\"%s\\\" already exists.\", obj.name);\n            console.warn(err);\n            throw err;\n        }\n\n        console.log(\"Added new command: \\\"%s\\\": %s\", obj.name, obj.commandText);\n        this.commandsCollection[out.name] = obj;\n        Loader.saveList(\"command\", this.commandsCollection);\n        return 0;\n\n    };\n\n    this.createButton = function (req) {\n        var obj = req.body.data;\n\n        if(this.buttonsCollection.hasOwnProperty(obj.buttonName))\n        {\n            var err = util.format(\"Button with name: \\\"%s\\\" already exists.\", obj.buttonName);\n            console.warn(err);\n            throw err;\n        }\n\n\n        console.log('Added new button: %s: ', obj.name, obj);\n\n        this.buttonsCollection[obj.buttonName] = obj;\n        Loader.saveList(\"command\", this.commandsCollection);\n        return 0;\n    };\n\n\n    this.getStyle = function (id) {\n        var style = this.stylesCollection[id];\n        if(!style)\n        {\n            return null;\n        }\n        return JSON.stringify(style);\n    };\n\n\n    this.getStyles = function ()\n    {\n        return JSON.stringify(this.stylesCollection);\n    };\n\n    this.getCommands = function () {\n        return JSON.stringify(this.commandsCollection);\n    };\n\n    this.getButtons = function () {\n        return JSON.stringify(this.buttonsCollection);\n\n    };\n\n    this.getLayouts = function () {\n        return JSON.stringify(this.layoutsCollection);\n    };\n\n    this.getCommand = function (id) {\n        var command = this.commandsCollection[id];\n        if(!command)\n        {\n            return null;\n        }\n        return JSON.stringify(command);\n    };\n\n    this.getButton = function (id) {\n        var btn = this.buttonsCollection[id];\n        if(!btn)\n        {\n            return null;\n        }\n        return JSON.stringify(btn);\n    };\n\n    this.getLayout = function (id) {\n        var layout = this.layoutsCollection[id];\n        if(!layout)\n        {\n            return null;\n        }\n        return JSON.stringify(layout);\n    };\n\n\n    this.deleteCss = function (req) {\n\n\n    };\n\n\n    this.creators = {\n        style : this.createStyle,\n        command : this.createCommand,\n        button: this.createButton\n    };\n\n    this.getters ={\n        style : this.getStyle,\n        command : this.getCommand,\n        button : this.getButton,\n        layout: this.getLayout\n    };\n\n\n};\n\n\nmodule.exports = manager;\n\n"]}